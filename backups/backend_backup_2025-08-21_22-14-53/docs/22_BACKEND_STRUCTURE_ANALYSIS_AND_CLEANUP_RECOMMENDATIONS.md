# –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Backend –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ—á–∏—Å—Ç–∫–µ

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 27 –∏—é–ª—è 2025  
**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç —Ä–µ—à–µ–Ω–∏—è  

## –û–±–∑–æ—Ä –ø—Ä–æ–±–ª–µ–º—ã

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ä–∞–±–æ—Ç—ã —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ QuestCity Backend –æ–±—Ä–∞–∑–æ–≤–∞–ª–∞—Å—å —Å–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∫–æ–ø–∏—è–º–∏ –∫–æ–¥–∞ –≤ —Ä–∞–∑–Ω—ã—Ö –ø–∞–ø–∫–∞—Ö. –ü—Ä–æ–≤–µ–¥–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –≤—Å–µ—Ö –ø–∞–ø–æ–∫.

## –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–∞–ø–æ–∫

### 1. **questcity-backend/main/** ‚≠ê –ê–ö–¢–£–ê–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø
- **–°—Ç–∞—Ç—É—Å:** –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è
- **–ü–æ—Å–ª–µ–¥–Ω—è—è –º–∏–≥—Ä–∞—Ü–∏—è:** 2025-07-28
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 39 –æ—Å–Ω–æ–≤–Ω—ã—Ö + 12 dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–†–∞–∑–º–µ—Ä app.py:** 7.4KB (202 —Å—Ç—Ä–æ–∫–∏)
- **–†–∞–∑–º–µ—Ä logger.py:** 8.8KB (255 —Å—Ç—Ä–æ–∫) - —Ä–∞–∑–≤–∏—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–ú–æ–¥—É–ª–∏:**
- ‚úÖ authentication, authorization, base, chat
- ‚úÖ exceptions (–æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–ø–∫–∞), favorite, file_validation
- ‚úÖ friend, friend_request, merch, profile
- ‚úÖ quest, resilience, unlock_request, user
- ‚úÖ WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞, S3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (resilience)

### 2. **questcity-backend/fixes/get-quest/** üì¶ –ü–†–û–ú–ï–ñ–£–¢–û–ß–ù–ê–Ø –í–ï–†–°–ò–Ø
- **–°—Ç–∞—Ç—É—Å:** –í–µ—Ä—Å–∏—è —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è)
- **–ü–æ—Å–ª–µ–¥–Ω—è—è –º–∏–≥—Ä–∞—Ü–∏—è:** 2025-03-12
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** –ß–∞—Å—Ç–∏—á–Ω—ã–π –Ω–∞–±–æ—Ä –º–æ–¥—É–ª–µ–π
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 25 –æ—Å–Ω–æ–≤–Ω—ã—Ö + 4 dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **–†–∞–∑–º–µ—Ä app.py:** 2.4KB (84 —Å—Ç—Ä–æ–∫–∏)

**–ú–æ–¥—É–ª–∏:**
- ‚úÖ authentication, di, favorite, friend, friend_request
- ‚úÖ merch, profile, quest, unlock_request, user
- ‚ùå –ù–µ—Ç: authorization, base, chat, file_validation, resilience

### 3. **questcity-backend/features/update-quest/** üì¶ –ü–†–û–ú–ï–ñ–£–¢–û–ß–ù–ê–Ø –í–ï–†–°–ò–Ø
- **–°—Ç–∞—Ç—É—Å:** –í–µ—Ä—Å–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–≤–µ—Å—Ç–æ–≤ (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è)
- **–ü–æ—Å–ª–µ–¥–Ω—è—è –º–∏–≥—Ä–∞—Ü–∏—è:** 2025-02-27
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** –ë–∞–∑–æ–≤—ã–π –Ω–∞–±–æ—Ä + S3
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 23 –æ—Å–Ω–æ–≤–Ω—ã—Ö + 4 dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **–†–∞–∑–º–µ—Ä app.py:** 2.4KB (84 —Å—Ç—Ä–æ–∫–∏)

**–ú–æ–¥—É–ª–∏:**
- ‚úÖ authentication, di, friend, friend_request, profile
- ‚úÖ quest, unlock_request, user
- ‚ùå –ù–µ—Ç: authorization, base, chat, favorite, file_validation, merch, resilience

### 4. **questcity-backend/features/get-quests/** üì¶ –£–°–¢–ê–†–ï–í–®–ê–Ø –í–ï–†–°–ò–Ø
- **–°—Ç–∞—Ç—É—Å:** –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–≤–µ—Å—Ç–æ–≤ (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è)
- **–ü–æ—Å–ª–µ–¥–Ω—è—è –º–∏–≥—Ä–∞—Ü–∏—è:** 2025-02-18
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 21 –æ—Å–Ω–æ–≤–Ω–∞—è + 4 dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **–†–∞–∑–º–µ—Ä app.py:** 2.4KB (79 —Å—Ç—Ä–æ–∫)

**–ú–æ–¥—É–ª–∏:**
- ‚úÖ authentication, di, friend, friend_request, quest, unlock_request, user
- ‚ùå –ù–µ—Ç: authorization, base, chat, favorite, file_validation, merch, profile, resilience

## –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è

```
2024-11-25 ‚Üí 2025-02-18: get-quests (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
                     ‚Üì
2025-02-27: update-quest (+ S3, profile)
                     ‚Üì  
2025-03-12: fixes/get-quest (+ favorite, merch)
                     ‚Üì
2025-07-28: main (+ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏, resilience, WebSocket)
```

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ñ—É–Ω–∫—Ü–∏–π

| –§—É–Ω–∫—Ü–∏—è | get-quests | update-quest | fixes/get-quest | main |
|---------|------------|--------------|-----------------|------|
| Authentication | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| Authorization | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| Profile | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| Favorite | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| Merch | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| Chat | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| WebSocket | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| S3 Storage | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| Resilience | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| File Validation | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |

## –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

–í—Å–µ –ø–∞–ø–∫–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `README.md` (99% –∏–¥–µ–Ω—Ç–∏—á–Ω—ã)
- `main.py` (–∏–¥–µ–Ω—Ç–∏—á–Ω—ã, –∫—Ä–æ–º–µ –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ main/)
- `docker-compose.yml` (–Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è)
- `alembic.ini` (–∏–¥–µ–Ω—Ç–∏—á–Ω—ã)
- `Dockerfile` (–∏–¥–µ–Ω—Ç–∏—á–Ω—ã)
- `logging_config.json` (–∏–¥–µ–Ω—Ç–∏—á–Ω—ã)

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ—á–∏—Å—Ç–∫–µ

### üî• –ö–†–ò–¢–ò–ß–ù–û: –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
```bash
cd questcity-backend
tar -czf ../backup/questcity-backend-pre-cleanup-$(date +%Y%m%d_%H%M%S).tar.gz .
```

### üìã –ü–ª–∞–Ω –æ—á–∏—Å—Ç–∫–∏

#### –≠—Ç–∞–ø 1: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
1. **–û—Å—Ç–∞–≤–∏—Ç—å:** `questcity-backend/main/` - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
2. **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å:** `questcity-backend/main/` ‚Üí `questcity-backend/`

#### –≠—Ç–∞–ø 2: –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏
```bash
mkdir questcity-backend/archive
mv questcity-backend/features questcity-backend/archive/
mv questcity-backend/fixes questcity-backend/archive/
```

#### –≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –û–±–Ω–æ–≤–∏—Ç—å `README.md` —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- –°–æ–∑–¥–∞—Ç—å `MIGRATION_GUIDE.md` –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –û–±–Ω–æ–≤–∏—Ç—å CI/CD –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### –≠—Ç–∞–ø 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
```bash
cd questcity-backend
python3 -m venv venv
source venv/bin/activate
pip install poetry
poetry install
poetry run python main.py
```

### üõ°Ô∏è –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏

–°–æ–∑–¥–∞—Ç—å –∞—Ä—Ö–∏–≤–Ω—É—é –ø–∞–ø–∫—É —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º:
```
questcity-backend/archive/
‚îú‚îÄ‚îÄ README_ARCHIVE.md          # –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–Ω—ã—Ö –≤–µ—Ä—Å–∏–π
‚îú‚îÄ‚îÄ features/                  # –°—Ç–∞—Ä—ã–µ feature-–≤–µ—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ get-quests/           # –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (–¥–æ 2025-02-18)
‚îÇ   ‚îî‚îÄ‚îÄ update-quest/         # S3 –≤–µ—Ä—Å–∏—è (–¥–æ 2025-02-27)
‚îî‚îÄ‚îÄ fixes/                    # –í–µ—Ä—Å–∏–∏ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
    ‚îî‚îÄ‚îÄ get-quest/            # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–¥–æ 2025-03-12)
```

## –†–∏—Å–∫–∏ –∏ –º–µ—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏

### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏:
1. **–ü–æ—Ç–µ—Ä—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π** - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ CI/CD** - –≤–æ–∑–º–æ–∂–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—ã–µ –ø—É—Ç–∏ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
3. **–ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏** - –∫—Ç–æ-—Ç–æ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏

### üõ°Ô∏è –ú–µ—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏:
1. **–ü–æ–ª–Ω—ã–π –±—ç–∫–∞–ø** –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º
2. **–ü–æ—ç—Ç–∞–ø–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã** –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** –≤ CHANGELOG.md

## –≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

–ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏:
- **–î–∏—Å–∫:** –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ ~200MB (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ 75%
- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:** –û–¥–Ω–∞ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤–º–µ—Å—Ç–æ 4
- **CI/CD:** –£–ø—Ä–æ—â–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å 4 –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ —Å–æ–∑–¥–∞–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—É –∏ —É—Å–ª–æ–∂–Ω—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:** –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
2. **–í –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ:** –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≤–µ—Ä—Å–∏–∏ `main/`
3. **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å:** –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
4. **–û–±–Ω–æ–≤–∏—Ç—å:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã

**–ò—Ç–æ–≥:** –ü–µ—Ä–µ—Ö–æ–¥ –∫ –µ–¥–∏–Ω–æ–π –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ `questcity-backend/main/` —Å –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π –æ–±–µ—Å–ø–µ—á–∏—Ç —á–∏—Å—Ç—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ —É–ø—Ä–æ—Å—Ç–∏—Ç –¥–∞–ª—å–Ω–µ–π—à—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É. 