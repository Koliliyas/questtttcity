# Исправление обработки base64 изображений в QuestService

## Проблема
При отправке base64 изображений с фронтенда бэкенд добавлял префикс `mock://quests/` к base64 строке, что приводило к невалидным URL.

## Причина
Логика в `QuestService` проверяла только `http://` и `https://` префиксы, но не учитывала `data:` префикс base64 строк.

## Решение
Добавлена проверка на `data:` префикс во всех методах обработки изображений.

## Измененные методы

### 1. `create_quest()`
- ✅ Добавлена проверка `not quest_dto.image.startswith(("http://", "https://", "data:"))`
- ✅ Base64 строки (data:) теперь не обрабатываются как пути к файлам
- ✅ Исправлена продакшенная логика для S3

### 2. `update_quest()`
- ✅ Добавлена проверка для `image` и `mentor_preference`
- ✅ Base64 строки сохраняются как есть
- ✅ Исправлена продакшенная логика для S3

### 3. `_create_point()`
- ✅ Добавлена проверка для `file` в точках квеста
- ✅ Base64 строки не загружаются в S3

## Логика обработки

### Режим разработки (ENVIRONMENT != "production")
```python
if not quest_dto.image.startswith(("http://", "https://", "data:")):
    # Если это не URL и не base64, то это путь к файлу - создаем mock URL
    quest_dto.image = f"mock://quests/{quest_dto.image}"
# Если это base64 (data:), оставляем как есть
```

### Режим продакшена
```python
if not quest_dto.image.startswith("data:"):
    # Загружаем в S3 только если это не base64
    quest_dto.image = await self._s3.upload_file("quests", quest_dto.image)
```

## Результат
- ✅ Base64 изображения сохраняются как есть без префиксов
- ✅ Пути к файлам по-прежнему обрабатываются как mock URL
- ✅ HTTP/HTTPS URL остаются без изменений
- ✅ Продакшенная логика не пытается загрузить base64 в S3

## Тестирование
После перезапуска сервера base64 изображения должны сохраняться корректно без префикса `mock://quests/`.





