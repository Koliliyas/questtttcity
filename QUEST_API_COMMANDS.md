# üöÄ QuestCity - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –∫–≤–µ—Å—Ç–æ–≤

–ë—ã—Å—Ç—Ä—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è QuestCity Backend.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Questcity/
‚îú‚îÄ‚îÄ questcity-backend/     # Backend API –Ω–∞ Python/FastAPI
‚îú‚îÄ‚îÄ questcity-frontend/    # Frontend –Ω–∞ Flutter
‚îî‚îÄ‚îÄ QUEST_API_COMMANDS.md  # ‚Üê –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã (–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ + –∑–∞–ø—É—Å–∫)

```bash
cd questcity-backend && ./quick_start.sh --stop && ./quick_start.sh --bg
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- ‚úÖ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –û—á–∏—â–∞–µ—Ç —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏  
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –∑–∞–Ω–æ–≤–æ –≤ —Ñ–æ–Ω–µ
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç/–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–¥–º–∏–Ω–∞
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

### üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã —Å –Ω—É–ª—è

```bash
cd questcity-backend && ./quick_start.sh --bg
```

**–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç:**
- üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ Poetry
- üê≥ –ó–∞–ø—É—Å–∫ PostgreSQL —á–µ—Ä–µ–∑ Docker
- üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
- üë§ –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (admin@questcity.com)
- üîê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- üåê –ó–∞–ø—É—Å–∫ FastAPI —Å–µ—Ä–≤–µ—Ä–∞

---

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –∫–≤–µ—Å—Ç–æ–≤

```bash
cd questcity-backend && ./test_quests_api.sh
```

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–≤–µ—Å—Ç–æ–≤ (100,000+ –≤ –±–∞–∑–µ)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞ –ø–æ ID
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–≤–µ—Å—Ç–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞

---

### üîê –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

```bash
cd questcity-backend && ./test_auth_api.sh
```

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–ª–æ–≥–∏–Ω)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ (refresh)
- ‚úÖ –î–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º
- ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã (logout)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

**–ë—ã—Å—Ç—Ä—ã–µ —Ä–µ–∂–∏–º—ã:**
```bash
# –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–∞
./test_auth_api.sh --login

# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
./test_auth_api.sh --quick
```

---

### üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º

```bash
cd questcity-backend

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
./quick_start.sh --status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
./quick_start.sh --logs

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
./quick_start.sh --stop

# –°–ø—Ä–∞–≤–∫–∞
./quick_start.sh --help
```

---

### üîç –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ API

```bash
cd questcity-backend

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–µ—Ä–∞
curl -s http://localhost:8000/api/v1/health/ | jq

# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–≤–µ—Å—Ç–æ–≤ (—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π)
curl -s -H "Authorization: Bearer $(cat .admin_token)" \
  "http://localhost:8000/api/v1/quests/" | jq '. | length'

# –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
curl -s -H "Authorization: Bearer $(cat .admin_token)" \
  "http://localhost:8000/api/v1/quests/categories/" | jq '. | length'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (–ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω)
curl -X POST "http://localhost:8000/api/v1/auth/login" \
  -d "login=admin@questcity.com" \
  -d "password=admin123" | jq '.accessToken'
```

---

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã:

- **üìñ API Documentation**: http://localhost:8000/docs
- **üîç ReDoc**: http://localhost:8000/redoc  
- **‚ù§Ô∏è Health Check**: http://localhost:8000/api/v1/health/
- **üåê API v1**: http://localhost:8000/api/v1/

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ API –∫–≤–µ—Å—Ç–æ–≤

```
GET    /api/v1/quests/              # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–≤–µ—Å—Ç–æ–≤
GET    /api/v1/quests/{id}          # –ö–≤–µ—Å—Ç –ø–æ ID
POST   /api/v1/quests/              # –°–æ–∑–¥–∞–Ω–∏–µ –∫–≤–µ—Å—Ç–∞
PUT    /api/v1/quests/{id}          # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞
DELETE /api/v1/quests/{id}          # –£–¥–∞–ª–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞

GET    /api/v1/quests/categories/   # –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–≤–µ—Å—Ç–æ–≤
GET    /api/v1/quests/places/       # –ú–µ—Å—Ç–∞ –¥–ª—è –∫–≤–µ—Å—Ç–æ–≤
GET    /api/v1/quests/tools/        # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
GET    /api/v1/quests/vehicles/     # –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç
GET    /api/v1/quests/types/        # –¢–∏–ø—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```

### üîê API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

```
POST   /api/v1/auth/register        # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST   /api/v1/auth/login           # –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
POST   /api/v1/auth/logout          # –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
POST   /api/v1/auth/refresh         # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
```

---

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è)
- **Email**: admin@questcity.com
- **Password**: admin123
- **–¢–æ–∫–µ–Ω**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `.admin_token`

### –†—É—á–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω
curl -X POST "http://localhost:8000/api/v1/auth/login" \
  -d "login=admin@questcity.com" \
  -d "password=admin123"

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "http://localhost:8000/api/v1/quests/"
```

---

## üõ†Ô∏è Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Port 8000 already in use"
```bash
cd questcity-backend && ./quick_start.sh --stop
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Database connection error" 
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker PostgreSQL
cd questcity-backend && docker-compose up -d database
```

### –ü—Ä–æ–±–ª–µ–º–∞: "No such file or directory"
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
cd questcity-backend
pwd  # –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: .../Questcity/questcity-backend
```

### –ü—Ä–æ–±–ª–µ–º–∞: "jq: command not found"
```bash
# –ù–∞ macOS
brew install jq
```

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–µ –¥–æ—Å—Ç—É–ø–Ω–æ:
- **üéØ –ö–≤–µ—Å—Ç–æ–≤**: 100,000+
- **üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–π**: 5
- **üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- **üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- **üìç –ú–µ—Å—Ç–∞**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

---

## üéâ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–î–ª—è –Ω–µ—Ç–µ—Ä–ø–µ–ª–∏–≤—ã—Ö:**

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë
cd questcity-backend && ./quick_start.sh --bg

# 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–≤–µ—Å—Ç—ã
./test_quests_api.sh

# 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
./test_auth_api.sh --quick

# 4. –û—Ç–∫—Ä—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
open http://localhost:8000/docs
```

**–ì–æ—Ç–æ–≤–æ! üöÄ –°–∏—Å—Ç–µ–º–∞ –∫–≤–µ—Å—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç!**

---

*üí° –°–æ–≤–µ—Ç: –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ –∑–∞–∫–ª–∞–¥–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–∞–Ω–¥–∞–º!* 